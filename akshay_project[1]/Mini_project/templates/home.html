{% extends "base.html" %}
{% block content %}

<style>
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 3rem;
    }
    
    .stat-card {
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 20px;
        padding: 1.5rem;
        text-align: center;
        transition: transform 0.3s, box-shadow 0.3s;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    }
    
    .stat-number {
        font-size: 2.5rem;
        font-weight: 900;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        display: block;
        margin-bottom: 0.5rem;
    }
    
    .stat-label {
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.9rem;
    }
    
    .feature-pills {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 2rem;
        justify-content: center;
    }
    
    .pill {
        background: rgba(102, 126, 234, 0.2);
        border: 1px solid rgba(102, 126, 234, 0.4);
        padding: 0.6rem 1.2rem;
        border-radius: 25px;
        font-size: 0.9rem;
        color: rgba(255, 255, 255, 0.95);
        transition: all 0.3s;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }
    
    .pill:hover {
        background: rgba(102, 126, 234, 0.35);
        transform: scale(1.05);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }
    
    .char-counter {
        text-align: right;
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.9rem;
        margin-top: 0.5rem;
    }
    
    .char-counter.warning {
        color: #fbbf24;
    }
    
    .options-row {
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
    }
    
    .option-group {
        flex: 1;
        min-width: 200px;
    }
    
    .option-group label {
        display: block;
        margin-bottom: 0.5rem;
        color: rgba(255, 255, 255, 0.8);
        font-weight: 500;
        font-size: 0.9rem;
    }
    
    .option-group select {
        width: 100%;
        padding: 0.8rem;
        background: rgba(0, 0, 0, 0.5);
        border: 2px solid rgba(255, 255, 255, 0.15);
        border-radius: 15px;
        color: white;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .option-group select:focus {
        outline: none;
        border-color: #667eea;
        background: rgba(0, 0, 0, 0.6);
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
    }
    
    .option-group select option {
        background: #0f0f14;
        color: white;
        padding: 0.5rem;
    }
    
    .quick-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }
    
    .quick-btn {
        flex: 1;
        padding: 0.8rem;
        background: rgba(0, 0, 0, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 15px;
        color: rgba(255, 255, 255, 0.9);
        cursor: pointer;
        transition: all 0.3s;
        font-size: 0.95rem;
    }
    
    .quick-btn:hover {
        background: rgba(102, 126, 234, 0.2);
        border-color: rgba(102, 126, 234, 0.4);
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    }
    
    .summary-card {
        background: rgba(102, 126, 234, 0.15);
        border: 2px solid rgba(102, 126, 234, 0.4);
        padding: 2rem;
        margin-top: 2rem;
        border-radius: 20px;
        animation: slideIn 0.5s ease;
    }
    
    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .summary-card h3 {
        color: #667eea;
        margin-bottom: 1rem;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .summary-content {
        line-height: 1.8;
        color: rgba(255, 255, 255, 0.9);
        font-size: 1.1rem;
        margin-bottom: 1.5rem;
    }
    
    .summary-actions {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }
    
    .action-btn {
        padding: 0.7rem 1.5rem;
        background: rgba(0, 0, 0, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        color: white;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 0.9rem;
    }
    
    .action-btn:hover {
        background: rgba(102, 126, 234, 0.2);
        border-color: rgba(102, 126, 234, 0.4);
        transform: translateY(-2px);
    }
    
    .loader {
        display: none;
        text-align: center;
        padding: 2rem;
    }
    
    .loader.active {
        display: block;
    }
    
    .spinner {
        width: 50px;
        height: 50px;
        border: 4px solid rgba(255, 255, 255, 0.1);
        border-top: 4px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 1rem;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .url-input-section {
        background: rgba(0, 0, 0, 0.3);
        padding: 1.5rem;
        border-radius: 15px;
        margin-bottom: 1.5rem;
        border: 1px dashed rgba(102, 126, 234, 0.3);
    }
    
    .url-input-section h4 {
        color: rgba(255, 255, 255, 0.8);
        margin-bottom: 1rem;
        font-size: 1rem;
    }
    
    .url-input-wrapper {
        display: flex;
        gap: 1rem;
    }
    
    .url-input-wrapper input {
        flex: 1;
        padding: 0.8rem 1rem;
        background: rgba(0, 0, 0, 0.5);
        border: 2px solid rgba(255, 255, 255, 0.15);
        border-radius: 12px;
        color: white;
        font-size: 1rem;
    }
    
    .url-input-wrapper input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
    }
    
    .url-input-wrapper input::placeholder {
        color: rgba(255, 255, 255, 0.4);
    }
    
    .url-input-wrapper button {
        width: auto;
        padding: 0.8rem 2rem;
    }
    
    @media (max-width: 768px) {
        .stats-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .options-row {
            flex-direction: column;
        }
        
        .quick-actions {
            flex-direction: column;
        }
        
        .url-input-wrapper {
            flex-direction: column;
        }
        
        .url-input-wrapper button {
            width: 100%;
        }
    }
</style>

<!-- Stats Section -->
<div class="stats-grid">
    <div class="stat-card">
        <span class="stat-number">10K+</span>
        <span class="stat-label">Articles Summarized</span>
    </div>
    <div class="stat-card">
        <span class="stat-number">2.5s</span>
        <span class="stat-label">Avg. Processing Time</span>
    </div>
    <div class="stat-card">
        <span class="stat-number">95%</span>
        <span class="stat-label">Accuracy Rate</span>
    </div>
    <div class="stat-card">
        <span class="stat-number">24/7</span>
        <span class="stat-label">Always Available</span>
    </div>
</div>

<!-- Feature Pills -->
<div class="feature-pills">
    <span class="pill">‚ö° Lightning Fast</span>
    <span class="pill">üéØ AI-Powered</span>
    <span class="pill">üì± Mobile Friendly</span>
    <span class="pill">üîí Secure & Private</span>
    <span class="pill">üåê Multi-Language</span>
</div>

<!-- Main Summarizer Card -->
<div class="card">
    <form method="post" id="summaryForm">
        
       
        
        <!-- Text Input -->
        <textarea name="article"
                  id="articleText"
                  placeholder="Paste an article or any long text here‚Ä¶ (News articles, blog posts, research papers, etc.)"
                  rows="16"
                  style="width:100%;"
                  oninput="updateCharCount()"
                  required></textarea>
        
        <div class="char-counter" id="charCounter">0 characters</div>
        
        <!-- Options Row -->
        <div class="options-row">
            <div class="option-group">
                <label for="summaryLength">Summary Length</label>
                <select name="length" id="summaryLength">
                    <option value="short">Short (3-4 sentences)</option>
                    <option value="medium" selected>Medium (5-7 sentences)</option>
                    <option value="long">Long (8-10 sentences)</option>
                </select>
            </div>
            
            <div class="option-group">
                <label for="summaryStyle">Summary Style</label>
                <select name="style" id="summaryStyle">
                    <option value="bullet" selected>Bullet Points</option>
                    <option value="paragraph">Paragraph</option>
                    <option value="highlights">Key Highlights</option>
                </select>
            </div>
        </div>
        
        <!-- Submit Button -->
        <button type="submit" class="primary" id="submitBtn">
            ‚ú® Generate Summary
        </button>
        
        <!-- Quick Actions -->
        <div class="quick-actions">
            <button type="button" class="quick-btn" onclick="clearText()">üóëÔ∏è Clear</button>
            <button type="button" class="quick-btn" onclick="pasteFromClipboard()">üìã Paste</button>
            <button type="button" class="quick-btn" onclick="loadExample()">üìÑ Try Example</button>
        </div>
    </form>
    
    <!-- Loader -->
    <div class="loader" id="loader">
        <div class="spinner"></div>
        <p style="color: rgba(255, 255, 255, 0.7);">Analyzing your article...</p>
    </div>
</div>

<!-- Summary Result (shown after form submission) -->
{% if summary %}
<div class="summary-card">
    <h3>üìù Your Summary</h3>
    <div class="summary-content" id="summaryContent">{{ summary }}</div>
    <div class="summary-actions">
        <button class="action-btn" onclick="copySummary()">üìã Copy Summary</button>
        <button class="action-btn" onclick="downloadSummary()">üíæ Download</button>
        <button class="action-btn" onclick="shareSummary()">üîó Share</button>
        <button class="action-btn" onclick="window.location.reload()">üîÑ New Summary</button>
    </div>
</div>
{% endif %}

<script>
    // Character counter
    function updateCharCount() {
        const textarea = document.getElementById('articleText');
        const counter = document.getElementById('charCounter');
        const length = textarea.value.length;
        counter.textContent = length.toLocaleString() + ' characters';
        
        if (length > 10000) {
            counter.classList.add('warning');
        } else {
            counter.classList.remove('warning');
        }
    }
    
    // Clear text
    function clearText() {
        document.getElementById('articleText').value = '';
        document.getElementById('articleUrl').value = '';
        updateCharCount();
    }
    
    // Paste from clipboard
    async function pasteFromClipboard() {
        try {
            const text = await navigator.clipboard.readText();
            document.getElementById('articleText').value = text;
            updateCharCount();
        } catch (err) {
            alert('Unable to paste. Please use Ctrl+V or Cmd+V');
        }
    }
    
    // Load example article
    function loadExample() {
        const example = `Breaking News: Scientists at MIT have developed a revolutionary new battery technology that could triple the range of electric vehicles. The breakthrough involves a novel lithium-metal design that is both safer and more efficient than current lithium-ion batteries.

The research team, led by Dr. Sarah Chen, spent five years perfecting the technology. "This could be a game-changer for the electric vehicle industry," Dr. Chen said in a press conference yesterday. "We've managed to solve the dendrite problem that has plagued lithium-metal batteries for decades."

The new batteries can store three times more energy than conventional lithium-ion batteries of the same size, potentially allowing electric vehicles to travel over 1,000 miles on a single charge. The technology is expected to reach commercial production within the next three years.`;
        
        document.getElementById('articleText').value = example;
        updateCharCount();
    }
    
    // Fetch article from URL
    async function fetchArticle() {
        const url = document.getElementById('articleUrl').value;
        if (!url) {
            alert('Please enter a valid URL');
            return;
        }
        
        // Show loader
        document.getElementById('loader').classList.add('active');
        
        // In production, this would call your Flask backend
        // For now, just simulate
        setTimeout(() => {
            document.getElementById('loader').classList.remove('active');
            alert('URL fetching coming soon! For now, please paste the text directly.');
        }, 1500);
        
        /* Production code:
        try {
            const response = await fetch('/fetch-url', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ url: url })
            });
            const data = await response.json();
            document.getElementById('articleText').value = data.content;
            updateCharCount();
            document.getElementById('loader').classList.remove('active');
        } catch (error) {
            alert('Error fetching article: ' + error.message);
            document.getElementById('loader').classList.remove('active');
        }
        */
    }
    
    // Copy summary
    function copySummary() {
        const summary = document.getElementById('summaryContent').textContent;
        navigator.clipboard.writeText(summary).then(() => {
            alert('‚úÖ Summary copied to clipboard!');
        }).catch(() => {
            alert('Unable to copy. Please select and copy manually.');
        });
    }
    
    // Download summary
    function downloadSummary() {
        const summary = document.getElementById('summaryContent').textContent;
        const blob = new Blob([summary], { type: 'text/plain' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'summary_' + Date.now() + '.txt';
        a.click();
        window.URL.revokeObjectURL(url);
    }
    
    // Share summary
    function shareSummary() {
        const summary = document.getElementById('summaryContent').textContent;
        if (navigator.share) {
            navigator.share({
                title: 'Article Summary',
                text: summary
            }).catch(() => {});
        } else {
            alert('Sharing not supported. Use copy instead!');
        }
    }
    
    // Form submission handler
    document.getElementById('summaryForm').addEventListener('submit', function() {
        document.getElementById('loader').classList.add('active');
        document.getElementById('submitBtn').disabled = true;
        document.getElementById('submitBtn').textContent = 'Processing...';
    });
</script>

{% endblock %}